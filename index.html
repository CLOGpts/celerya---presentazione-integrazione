<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF--8" />
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ðŸš€</text></svg>">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Celerya - Demo Integrazione</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      /* For custom scrollbar and font */
      @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap');
      body {
        font-family: 'Inter', sans-serif;
      }
      /* Nascondi l'app di default */
      #root {
        display: none;
      }
      @keyframes progress-bar-animation {
        from { width: 0%; }
        to { width: 100%; }
      }
      @keyframes fade-in {
          from { opacity: 0; transform: scale(0.98); }
          to { opacity: 1; transform: scale(1); }
      }
      @keyframes slide-up-fade {
          from { opacity: 0; transform: translateY(10px); }
          to { opacity: 1; transform: translateY(0); }
      }
      .animate-fade-in {
          animation: fade-in 0.5s ease-out forwards;
      }
      .animate-fade-in-fast {
          animation: fade-in 0.3s ease-out forwards;
      }
      .animate-slide-up-fade {
          animation: slide-up-fade 0.5s ease-out forwards;
      }
      .perspective-1000 {
        perspective: 1000px;
      }
      .transform-style-3d {
        transform-style: preserve-3d;
      }
    </style>
  <script type="importmap">
{
  "imports": {
    "@google/genai": "https://esm.sh/@google/genai@^1.15.0",
    "react/": "https://esm.sh/react@^19.1.1/",
    "react": "https://esm.sh/react@^19.1.1",
    "react-dom/": "https://esm.sh/react-dom@^19.1.1/",
    "firebase/app": "https://esm.sh/firebase@10.12.2/app",
    "firebase/firestore": "https://esm.sh/firebase@10.12.2/firestore",
    "firebase/": "https://esm.sh/firebase@^12.1.0/"
  }
}
</script>
<link rel="stylesheet" href="/index.css">
</head>
  <body class="bg-slate-50">
    <!-- Schermata di Login -->
    <div id="login-container" class="fixed inset-0 bg-gray-100 flex items-center justify-center z-50 p-4">
      <div class="bg-white p-6 sm:p-8 rounded-2xl shadow-xl w-full max-w-sm animate-fade-in">
        <div class="text-center mb-8">
            <h1 class="text-2xl sm:text-3xl font-bold" style="color: #2D5F9D;">Celerya</h1>
            <p class="text-slate-500 mt-1">Accesso Riservato</p>
        </div>
        <form id="login-form">
          <div class="mb-5">
            <label for="username" class="block text-gray-700 text-sm font-bold mb-2">Nome Utente</label>
            <input type="text" id="username" name="username" placeholder="Il tuo nome utente" class="shadow-sm appearance-none border-gray-600 bg-gray-700 rounded-lg w-full py-3 px-4 text-white placeholder-gray-400 leading-tight focus:outline-none focus:ring-2 focus:ring-[#3B74B8]" required autocomplete="username">
          </div>
          <div class="mb-6">
            <label for="password" class="block text-gray-700 text-sm font-bold mb-2">Password</label>
            <input type="password" id="password" name="password" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" class="shadow-sm appearance-none border-gray-600 bg-gray-700 rounded-lg w-full py-3 px-4 text-white placeholder-gray-400 mb-2 leading-tight focus:outline-none focus:ring-2 focus:ring-[#3B74B8]" required autocomplete="current-password">
            <p id="error-message" class="text-red-500 text-xs italic" style="display: none;">Credenziali non valide. Riprova.</p>
          </div>
          <div class="flex items-center justify-between">
            <button type="submit" class="w-full text-white font-bold py-3 px-4 rounded-lg focus:outline-none focus:shadow-outline transition-transform transform hover:scale-105" style="background-color: #3B74B8;">
              Accedi
            </button>
          </div>
        </form>
      </div>
    </div>
    
    <div id="root"></div>

    <!-- Script di gestione del login -->
    <script>
      (function() {
        const correctUser = 'Claudio';
        const correctPass = 'Andrea';
        
        const loginForm = document.getElementById('login-form');
        const usernameInput = document.getElementById('username');
        const passwordInput = document.getElementById('password');
        const errorMessage = document.getElementById('error-message');
        const loginContainer = document.getElementById('login-container');
        const rootApp = document.getElementById('root');

        if (loginForm) {
            loginForm.addEventListener('submit', function(event) {
                event.preventDefault(); // Impedisce il ricaricamento della pagina
                
                const user = usernameInput.value;
                const pass = passwordInput.value;

                if (user === correctUser && pass === correctPass) {
                    // Credenziali corrette
                    loginContainer.style.display = 'none';
                    rootApp.style.display = 'block';
                } else {
                    // Credenziali errate
                    errorMessage.style.display = 'block';
                    passwordInput.value = ''; // Pulisce il campo password
                    passwordInput.focus(); // Rimette il focus sul campo password
                    // Fa vibrare il form per un feedback visivo
                    loginContainer.querySelector('div').classList.add('animate-shake');
                    setTimeout(() => {
                        loginContainer.querySelector('div').classList.remove('animate-shake');
                    }, 500);
                }
            });
        }
        
        // Aggiungo una piccola animazione di shake per il feedback di errore
        const style = document.createElement('style');
        style.textContent = `
            @keyframes shake {
                0%, 100% { transform: translateX(0); }
                10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
                20%, 40%, 60%, 80% { transform: translateX(5px); }
            }
            .animate-shake {
                animation: shake 0.5s ease-in-out;
            }
        `;
        document.head.appendChild(style);
      })();
    </script>
    
    <script type="module" src="/index.tsx"></script>
  </body>
</html>